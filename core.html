<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>
    Jeez Syed
    </title>
    <link rel="stylesheet" href="corestyle.css" />
</head>
<body>
    <canvas id="canvas" width="2040" height="900"></canvas>
    <!-- background style -->
    <script src="Classes/sty.js"></script> 
    <!-- main shooting sprite -->
    <script src="MnSprites/spMain.js"></script>
    <!-- main bg -->
    <script src="Classes/keycode.js"></script>
    <script src="Classes/vector.js"></script>
    <script src="Classes/acceleration.js"></script>
    <!-- secondary sprites -->
    <script src="EnmSpr/enm1.js"></script>
    <script src="enmspr/enm2.js"></script>
    <script src="EnmSpr/bullets.js"></script>
    <!-- related to collision  -->
    <script src="Classes/collision.js"></script>
    <script src="boundaries/top.js"></script>
    <script src="boundaries/left.js"></script>
    <script src="boundaries/right.js"></script>
    <script src="boundaries/bottom.js"></script>

    <script src="enmspr/rep.js"></script>
    <!-- gradient is not yet implemented -->

    <script>
        //as pg loads
        window.onload = function () {
            //create a reference to the canvas
            var canvas = document.getElementById('canvas'),
                //access the 2D drawing API
                context = canvas.getContext('2d'),
                //new instance of the Mainspr class
                jet = new Mainspr(),
                enem = new enemy(),
                enem2 = new enemy2(),
                bullet = new bullets(),
                b1 = new bound1(),
                b2 = new bound2(),
                b3 = new bound3(),
                b4 = new bound4(),
                
                test = new Arrow(),
                
                
                //create a new acceleration object
                acceleraton = new Accelerate(0),
                //create a new instance of the collision detection class
                collision = new Collision();
            //function to handle keyboard events
            function KeyboardEventHandler(event) {
                //↑
                if (event.keyCode == keycode.UP) {
                    acceleraton.VThrust(.1);
                }
                //←
                if (event.keyCode == keycode.LEFT) {
                    acceleraton.HThrust(.1);
                }
                //→
                if (event.keyCode == keycode.RIGHT) {
                    acceleraton.HThrust(-.1);
                }
                //↓
                if (event.keyCode == keycode.DOWN) {
                    acceleraton.Halt();
                }
            }
            //listener for keydown event
            window.addEventListener('keydown', KeyboardEventHandler, false);
            // window.addEventListener('keyup', KeyboardEventHandler, false);
            //need to add the sty.js 
            test.X = 300;
            test.Y = 300;
            enem.Y = 80;
            enem.X = 80;

            
            (function drawFrame() {
                //clear the canvas for the new frame
                // var gradient = context.createLinearGradient(0, 0, 170, 0);
                // gradient.addColorStop("0", "magenta");
                // gradient.addColorStop("0.5", "blue");
                // gradient.addColorStop("1.0", "red");
                // context.strokeStyle = gradient;
                // context.lineWidth = 3;
                context.clearRect(0, 0, canvas.width, canvas.height);
                context.font = "bold 30px Helvetica, Arial, sans-serif";
                context.fillText("Your fking score!", 1750, 30);


                /*context.strokeRect(20, 20, 150, 100);*/
               /* context.clearRect(0, 0, canvas.width, canvas.height);*/
                //draws jet
                jet.draw(context);
                //draws enemy 1
                enem.draw(context);
                //draws enem 2
                enem2.draw(context);
                bullet.draw(context);
                b1.draw(context);
                b2.draw(context);
                b3.draw(context);
                b4.draw(context);


                test.draw(context);
                //move the Mainspr
                jet.move();
                bullet.move();
                  
                


                enem.move();
                enem2.move();
                // bullet.accelerate();
                //acceleration
                jet.accelerate(acceleraton);
                //get the next animation frame
                window.requestAnimationFrame(drawFrame);


                //calculate the difference between the box x position and the arrow x position
                var dx = jet.X - test.X;
                //calculate the difference between the box y position and the arrow y position
                var dy = jet.Y - test.Y;
                //set the angle of rotation for the arrow
                arrow.Rotation = Math.atan2(dy, dx);

                // if (collision.Overlapping(jet, b1)) {
                //     //halt the ship
                //     alert("collision")
                //     jet.halt()
                // }


            })();
        }
    </script>
</body>
</html>
